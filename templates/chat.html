{% extends "base.html" %}
{% load staticfiles %}

{% block title %}
  Chat
{% endblock %}

{% block style %}
  <link rel="stylesheet" href="{% static "styles/chat.css" %}">
{% endblock %}

{% block content %}
  {% include "navbar.html" %}

  <div id="message-box" class="flex-center">
    <div class="mdl-card mdl-shadow--4dp card">
      <template v-for="message in messages">
        <template v-if="message.type == 'get'">
          <div class="bubble-box">
            <div class="left-message bubble">
              $$ message.message $$
            </div>
          </div>
        </template>
        <template v-else>
          <div class="bubble-box">
            <div class="right-message bubble">
              $$ message.message $$
            </div>
          </div>
        </template>
      </template>

      <div id="input_box">
        <form id="form-id">
          <div class="mdl-textfield mdl-js-textfield">
            <input class="mdl-textfield__input" type="text" id="id_message" name="message">
            <label class="mdl-textfield__label" for="id_message">请输入消息...</label>
          </div>
          <button type="submit"
                  class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-js-ripple-effect mdl-button--colored">
            <i class="mdi mdi-send"></i>
          </button>
        </form>
      </div>
    </div>
  </div>

{% endblock %}

{% block script %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
  <script src="{% static "scripts/vue.min.js" %}"></script>
  <script src="{% static "scripts/chat.js" %}"></script>
{% endblock %}
